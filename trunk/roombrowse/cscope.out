cscope 15 $HOME/packages/roombrowse               0000015964
	@config.h

17 
	#ENABLE_NLS
 1

	)

20 
	#GAIM_PLUGINS
 1

	)

23 
	#HAVE_ALLOCA
 1

	)

27 
	#HAVE_ALLOCA_H
 1

	)

30 
	#HAVE_ARGZ_H
 1

	)

33 
	#HAVE_ARPA_NAMESER_COMPAT_H
 1

	)

36 
	#HAVE_ASM_BYTEORDER_H
 1

	)

39 
	#HAVE_ASPRINTF
 1

	)

42 
	#HAVE_ATEXIT
 1

	)

51 
	#HAVE_BYTESWAP_H
 1

	)

54 
	#HAVE_CONNECT
 1

	)

58 
	#HAVE_DCGETTEXT
 1

	)

62 
	#HAVE_DECL_FEOF_UNLOCKED
 1

	)

66 
	#HAVE_DECL_FGETS_UNLOCKED
 0

	)

70 
	#HAVE_DECL_GETC_UNLOCKED
 1

	)

74 
	#HAVE_DECL__SNPRINTF
 0

	)

78 
	#HAVE_DECL__SNWPRINTF
 0

	)

81 
	#HAVE_DLFCN_H
 1

	)

84 
	#HAVE_ENDIAN_H
 1

	)

87 
	#HAVE_FCNTL_H
 1

	)

90 
	#HAVE_FWPRINTF
 1

	)

93 
	#HAVE_GETADDRINFO
 1

	)

96 
	#HAVE_GETCWD
 1

	)

99 
	#HAVE_GETEGID
 1

	)

102 
	#HAVE_GETEUID
 1

	)

105 
	#HAVE_GETGID
 1

	)

108 
	#HAVE_GETHOSTID
 1

	)

111 
	#HAVE_GETOPT_LONG
 1

	)

114 
	#HAVE_GETPAGESIZE
 1

	)

117 
	#HAVE_GETTEXT
 1

	)

120 
	#HAVE_GETUID
 1

	)

123 
	#HAVE_GNUTLS
 1

	)

126 
	#HAVE_GNUTLS_GNUTLS_H
 1

	)

129 
	#HAVE_ICONV
 1

	)

132 
	#HAVE_INTMAX_T
 1

	)

135 
	#HAVE_INTTYPES_H
 1

	)

139 
	#HAVE_INTTYPES_H_WITH_UINTMAX
 1

	)

157 
	#HAVE_LANGINFO_CODESET
 1

	)

160 
	#HAVE_LC_MESSAGES
 1

	)

163 
	#HAVE_LIBNSL
 1

	)

172 
	#HAVE_LIMITS_H
 1

	)

175 
	#HAVE_LOCALE_H
 1

	)

178 
	#HAVE_LONG_DOUBLE
 1

	)

181 
	#HAVE_LONG_LONG
 1

	)

184 
	#HAVE_LRAND48
 1

	)

190 
	#HAVE_MALLOC_H
 1

	)

193 
	#HAVE_MEMCPY
 1

	)

196 
	#HAVE_MEMMOVE
 1

	)

199 
	#HAVE_MEMORY_H
 1

	)

202 
	#HAVE_MEMPCPY
 1

	)

205 
	#HAVE_MMAP
 1

	)

208 
	#HAVE_MUNMAP
 1

	)

211 
	#HAVE_NL_TYPES_H
 1

	)

223 
	#HAVE_PATHS_H
 1

	)

226 
	#HAVE_POSIX_PRINTF
 1

	)

232 
	#HAVE_PUTENV
 1

	)

235 
	#HAVE_RANDOM
 1

	)

238 
	#HAVE_SETENV
 1

	)

241 
	#HAVE_SETLOCALE
 1

	)

244 
	#HAVE_SGTTY_H
 1

	)

247 
	#HAVE_SIGNAL_H
 1

	)

253 
	#HAVE_SNPRINTF
 1

	)

256 
	#HAVE_SSL
 1

	)

262 
	#HAVE_STARTUP_NOTIFICATION
 1

	)

265 
	#HAVE_STDARG_H
 1

	)

268 
	#HAVE_STDDEF_H
 1

	)

271 
	#HAVE_STDINT_H
 1

	)

275 
	#HAVE_STDINT_H_WITH_UINTMAX
 1

	)

278 
	#HAVE_STDLIB_H
 1

	)

281 
	#HAVE_STPCPY
 1

	)

284 
	#HAVE_STRCASECMP
 1

	)

287 
	#HAVE_STRCHR
 1

	)

290 
	#HAVE_STRDUP
 1

	)

293 
	#HAVE_STRERROR
 1

	)

296 
	#HAVE_STRFTIME
 1

	)

299 
	#HAVE_STRINGS_H
 1

	)

302 
	#HAVE_STRING_H
 1

	)

305 
	#HAVE_STRSTR
 1

	)

308 
	#HAVE_STRTOUL
 1

	)

311 
	#HAVE_SYS_CDEFS_H
 1

	)

314 
	#HAVE_SYS_FILE_H
 1

	)

320 
	#HAVE_SYS_IOCTL_H
 1

	)

326 
	#HAVE_SYS_PARAM_H
 1

	)

329 
	#HAVE_SYS_SELECT_H
 1

	)

332 
	#HAVE_SYS_STAT_H
 1

	)

335 
	#HAVE_SYS_TIME_H
 1

	)

338 
	#HAVE_SYS_TYPES_H
 1

	)

341 
	#HAVE_SYS_UIO_H
 1

	)

344 
	#HAVE_SYS_UTSNAME_H
 1

	)

347 
	#HAVE_SYS_WAIT_H
 1

	)

350 
	#HAVE_TERMIOS_H
 1

	)

356 
	#HAVE_TM_GMTOFF
 1

	)

359 
	#HAVE_TSEARCH
 1

	)

362 
	#HAVE_UINTMAX_T
 1

	)

365 
	#HAVE_UNISTD_H
 1

	)

368 
	#HAVE_UNSIGNED_LONG_LONG
 1

	)

371 
	#HAVE_VPRINTF
 1

	)

374 
	#HAVE_WCHAR_T
 1

	)

377 
	#HAVE_WCSLEN
 1

	)

380 
	#HAVE_WINT_T
 1

	)

383 
	#HAVE_X11_SM_SMLIB_H
 1

	)

386 
	#HAVE___ARGZ_COUNT
 1

	)

389 
	#HAVE___ARGZ_NEXT
 1

	)

392 
	#HAVE___ARGZ_STRINGIFY
 1

	)

395 
	#HAVE___FSETLOCKING
 1

	)

398 
	#ICONV_CONST


	)

401 
	#INTDIV0_RAISES_SIGFPE
 1

	)

404 
	#LIBEBOOK_MAJOR_VER
 1

	)

407 
	#LIBEBOOK_MICRO_VER
 2

	)

410 
	#LIBEBOOK_MINOR_VER
 0

	)

416 
	#PACKAGE
 "gaim"

	)

419 
	#PACKAGE_BUGREPORT
 "gaim-devñ@li°s.sour˚f‹ge.√t"

	)

422 
	#PACKAGE_NAME
 "gaim"

	)

425 
	#PACKAGE_STRING
 "gaim 1.0.1"

	)

428 
	#PACKAGE_TARNAME
 "gaim"

	)

431 
	#PACKAGE_VERSION
 "1.0.1"

	)

437 
	#RETSIGTYPE
 

	)

452 
	#STATIC_PROTO_INIT
 
	`°©ic_¥Ÿo_öô
(Ë{ }

	)

455 
	#STDC_HEADERS
 1

	)

461 
	#USE_GTKSPELL


	)

467 
	#USE_SCREENSAVER
 1

	)

470 
	#USE_SM
 1

	)

473 
	#VERSION
 "1.0.1"

	)

483 
	#ZEPHYR_INT32
 

	)

493 #i‚de‡
__˝lu•lus


	@roombrowse.c

4 
	~"öã∫Æ.h
"

5 
	~"gtkgaim.h
"

7 
	~"c⁄vîßti⁄.h
"

8 
	~"debug.h
"

9 
	~"log.h
"

10 
	~"¥efs.h
"

11 
	~"sig«ls.h
"

12 
	~"utû.h
"

13 
	~"vîsi⁄.h
"

14 
	~"¥∂.h
"

16 
	~"gtkc⁄v.h
"

17 
	~"gtkimhtml.h
"

18 
	~"gtk∂ugö.h
"

19 
	~"gtkdülogs.h
"

20 
	~"gtkutûs.h
"

21 
	~"gtkbli°.h
"

22 
	~<gdk/gdkkeysyms.h
>

24 
	#CHATSORT_PLUGIN_ID
 "gtk-ch©s‹t"

	)

25 
	#CHATSORT_USERS_COLUMNS
 4

	)

26 
	#CHATSORT_USERS_ENTRY_COLUMN
 3

	)

28 
GLi°
 *
	gbrow£rs
 = 
NULL
;

29 
	sRoomBrow£Info
 {

31 
GaimAccou¡
 *
	maccou¡
;

32 
GaimC⁄√˘i⁄
 *
	mgc
;

35 
GtkWidgë
 *

36 
	$£tup_roombrow£_∑√
(
GaimC⁄vîßti⁄
 *
c⁄v
)

38 
GaimPlugöPrŸocﬁInfo
 *
¥∂_öfo
 = 
NULL
;

39 
GaimGtkC⁄vîßti⁄
 *
gtkc⁄v
;

40 
GaimGtkCh©P™e
 *
gtkch©
;

41 
GaimC⁄√˘i⁄
 *
gc
;

42 
GtkWidgë
 *
v∑√d
, *
h∑√d
;

43 
GtkWidgë
 *
vbox
, *
hbox
;

44 
GtkWidgë
 *
lbox
, *
bbox
;

45 
GtkWidgë
 *
œbñ
;

46 
GtkWidgë
 *
li°
;

47 
GtkWidgë
 *
buâ⁄
;

48 
GtkWidgë
 *
sw
;

49 
GtkLi°St‹e
 *
ls
;

50 
GtkCñlRídîî
 *
ªnd
;

51 
GtkTªeVõwCﬁumn
 *
cﬁ
;

52 
GLi°
 *
focus_chaö
 = 
NULL
;

54 
gtkc⁄v
 = 
	`GAIM_GTK_CONVERSATION
(
c⁄v
);

55 
gtkch©
 = 
gtkc⁄v
->
u
.
ch©
;

56 
gc
 = 
	`gaim_c⁄vîßti⁄_gë_gc
(
c⁄v
);

59 
v∑√d
 = 
	`gtk_v∑√d_√w
();

60 
	`gtk_widgë_show
(
v∑√d
);

62 
vbox
 = 
	`gtk_vbox_√w
(
FALSE
, 6);

63 
	`gtk_∑√d_∑ck1
(
	`GTK_PANED
(
v∑√d
), 
vbox
, 
TRUE
, TRUE);

64 
	`gtk_widgë_show
(
vbox
);

67 
h∑√d
 = 
	`gtk_h∑√d_√w
();

68 
	`gtk_box_∑ck_°¨t
(
	`GTK_BOX
(
vbox
), 
h∑√d
, 
TRUE
, TRUE, 0);

69 
	`gtk_widgë_show
(
h∑√d
);

72 
gtkc⁄v
->
sw
 = 
	`gtk_s¸ﬁÀd_wödow_√w
(
NULL
, NULL);

73 
	`gtk_s¸ﬁÀd_wödow_£t_pﬁicy
(
	`GTK_SCROLLED_WINDOW
(
gtkc⁄v
->
sw
),

74 
GTK_POLICY_AUTOMATIC
, 
GTK_POLICY_ALWAYS
);

75 
	`gtk_s¸ﬁÀd_wödow_£t_shadow_ty≥
(
	`GTK_SCROLLED_WINDOW
(
gtkc⁄v
->
sw
),

76 
GTK_SHADOW_IN
);

77 
	`gtk_∑√d_∑ck1
(
	`GTK_PANED
(
h∑√d
), 
gtkc⁄v
->
sw
, 
TRUE
, TRUE);

79 
	`gtk_widgë_£t_size_ªque°
(
gtkc⁄v
->
sw
,

80 
	`gaim_¥efs_gë_öt
("/gaim/gtk/conversations/chat/default_width"),

81 
	`gaim_¥efs_gë_öt
("/gaim/gtk/conversations/chat/default_height"));

86 
	`gtk_widgë_show
(
gtkc⁄v
->
sw
);

88  
v∑√d
;

89 
	}
}

91 
göt


92 
	$˛o£_c⁄v_cb
(
GtkWidgë
 *
w
, 
gpoöãr
 
d
)

94 
GaimC⁄vîßti⁄
 *
c⁄v
 = (GaimC⁄vîßti⁄ *)
d
;

96 
	`gaim_c⁄vîßti⁄_de°roy
(
c⁄v
);

98  
TRUE
;

99 
	}
}

100 
GdkPixbuf
* 
	$gë_èb_ic⁄
(
GaimC⁄vîßti⁄
 *
c⁄v
, 
gboﬁón
 
smÆl_ic⁄
)

102 
GaimAccou¡
 *
accou¡
 = 
NULL
;

103 c⁄° *
«me
 = 
NULL
;

104 
GdkPixbuf
 *
°©us
 = 
NULL
;

106 
	`g_ªtu∫_vÆ_if_Áû
–
c⁄v
 !
NULL
, NULL);

108 
accou¡
 = 
	`gaim_c⁄vîßti⁄_gë_accou¡
(
c⁄v
);

109 
«me
 = 
	`gaim_c⁄vîßti⁄_gë_«me
(
c⁄v
);

111 
	`g_ªtu∫_vÆ_if_Áû
–
accou¡
 !
NULL
, NULL);

112 
	`g_ªtu∫_vÆ_if_Áû
–
«me
 !
NULL
, NULL);

115 i‡(
	`gaim_c⁄vîßti⁄_gë_ty≥
(
c⁄v
Ë=
GAIM_CONV_IM
) {

116 
GaimBuddy
 *
b
 = 
	`gaim_föd_buddy
(
accou¡
, 
«me
);

117 i‡(
b
 !
NULL
) {

118 
°©us
 = 
	`gaim_gtk_bli°_gë_°©us_ic⁄
((
GaimBli°Node
*)
b
,

119 (
smÆl_ic⁄
 ? 
GAIM_STATUS_ICON_SMALL
 : 
GAIM_STATUS_ICON_LARGE
));

123 i‡(!
°©us
) {

124 
GdkPixbuf
 *
pixbuf
;

125 
pixbuf
 = 
	`¸óã_¥∂_ic⁄
(
accou¡
);

127 i‡(
smÆl_ic⁄
 && 
pixbuf
 !
NULL
)

129 
°©us
 = 
	`gdk_pixbuf_sˇÀ_sim∂e
(
pixbuf
, 15, 15,

130 
GDK_INTERP_BILINEAR
);

131 
	`g_obje˘_uƒef
(
pixbuf
);

134 
°©us
 = 
pixbuf
;

136  
°©us
;

137 
	}
}

140 
	$upd©e_èb_ic⁄
(
GaimC⁄vîßti⁄
 *
c⁄v
)

142 
GaimGtkC⁄vîßti⁄
 *
gtkc⁄v
;

143 
GaimC⁄vWödow
 *
wö
 = 
	`gaim_c⁄vîßti⁄_gë_wödow
(
c⁄v
);

144 
GaimAccou¡
 *
accou¡
;

145 c⁄° *
«me
;

146 
GdkPixbuf
 *
°©us
 = 
NULL
;

148 
	`g_ªtu∫_if_Áû
(
c⁄v
 !
NULL
);

150 
gtkc⁄v
 = 
	`GAIM_GTK_CONVERSATION
(
c⁄v
);

151 
«me
 = 
	`gaim_c⁄vîßti⁄_gë_«me
(
c⁄v
);

152 
accou¡
 = 
	`gaim_c⁄vîßti⁄_gë_accou¡
(
c⁄v
);

154 
°©us
 = 
	`gë_èb_ic⁄
(
c⁄v
, 
TRUE
);

156 
	`g_ªtu∫_if_Áû
(
°©us
 !
NULL
);

158 
	`gtk_image_£t_‰om_pixbuf
(
	`GTK_IMAGE
(
gtkc⁄v
->
ic⁄
), 
°©us
);

159 
	`gtk_image_£t_‰om_pixbuf
(
	`GTK_IMAGE
(
gtkc⁄v
->
míu_ic⁄
), 
°©us
);

161 i‡(
°©us
 !
NULL
)

162 
	`g_obje˘_uƒef
(
°©us
);

164 i‡(
	`gaim_c⁄v_wödow_gë_a˘ive_c⁄vîßti⁄
(
wö
Ë=
c⁄v
 &&

165 
gtkc⁄v
->
u
.
im
->
™im
 =
NULL
)

167 
°©us
 = 
	`gë_èb_ic⁄
(
c⁄v
, 
FALSE
);

169 
	`gtk_wödow_£t_ic⁄
(
	`GTK_WINDOW
(
	`GAIM_GTK_WINDOW
(
wö
)->
wödow
), 
°©us
);

171 i‡(
°©us
 !
NULL
)

172 
	`g_obje˘_uƒef
(
°©us
);

174 
	}
}

177 
	$èb_˛o£_buâ⁄_°©e_ch™ged_cb
(
GtkWidgë
 *
widgë
, 
GtkSèãTy≥
 
¥ev_°©e
)

179 i‡(
	`GTK_WIDGET_STATE
(
widgë
Ë=
GTK_STATE_ACTIVE
)

180 
	`gtk_widgë_£t_°©e
(
widgë
, 
GTK_STATE_NORMAL
);

181 
	}
}

184 
	$roombrow£_gtk_add_c⁄vîßti⁄
(
GaimC⁄vWödow
 *
wö
, 
GaimC⁄vîßti⁄
 *
c⁄v
)

186 
GaimGtkWödow
 *
gtkwö
;

187 
GaimGtkC⁄vîßti⁄
 *
gtkc⁄v
, *
focus_gtkc⁄v
;

188 
GaimC⁄vîßti⁄
 *
focus_c⁄v
;

189 
GtkWidgë
 *
∑√
 = 
NULL
;

190 
GtkWidgë
 *
èb_c⁄t
;

191 
GtkWidgë
 *
èbby
, *
míu_èbby
;

192 
GtkWidgë
 *
˛o£_image
;

193 
gboﬁón
 
√w_ui
;

194 
GaimC⁄vîßti⁄Ty≥
 
c⁄v_ty≥
;

195 c⁄° *
«me
;

197 
«me
 = 
	`gaim_c⁄vîßti⁄_gë_«me
(
c⁄v
);

198 
c⁄v_ty≥
 = 
	`gaim_c⁄vîßti⁄_gë_ty≥
(
c⁄v
);

199 
gtkwö
 = 
	`GAIM_GTK_WINDOW
(
wö
);

201 i‡(
c⁄v
->
ui_d©a
 !
NULL
) {

202 
gtkc⁄v
 = (
GaimGtkC⁄vîßti⁄
 *)
c⁄v
->
ui_d©a
;

204 
èb_c⁄t
 = 
gtkc⁄v
->tab_cont;

206 
√w_ui
 = 
FALSE
;

209 
gtkc⁄v
 = 
	`g_mÆloc0
((
GaimGtkC⁄vîßti⁄
));

210 
c⁄v
->
ui_d©a
 = 
gtkc⁄v
;

213 
gtkc⁄v
->
sg
 = 
	`gtk_size_group_√w
(
GTK_SIZE_GROUP_BOTH
);

214 
gtkc⁄v
->
toﬁtùs
 = 
	`gtk_toﬁtùs_√w
();

216 
	`gaim_debug_misc
("roombrowse","setting upÖane\n");

217 
∑√
 = 
	`£tup_roombrow£_∑√
(
c⁄v
);

219 
	`gaim_debug_misc
("roombrowse","set upÖane\n");

221 i‡(
∑√
 =
NULL
) {

222 
	`g_‰ì
(
gtkc⁄v
);

223 
c⁄v
->
ui_d©a
 = 
NULL
;

231 
gtkc⁄v
->
èb_c⁄t
 =Åab_c⁄à
	`gtk_vbox_√w
(
FALSE
, 6);

232 
	`gtk_c⁄èöî_£t_b‹dî_width
(
	`GTK_CONTAINER
(
èb_c⁄t
), 6);

233 
	`gtk_c⁄èöî_add
(
	`GTK_CONTAINER
(
èb_c⁄t
), 
∑√
);

234 
	`gtk_widgë_show
(
∑√
);

236 
√w_ui
 = 
TRUE
;

238 
gtkc⁄v
->
make_sound
 = 
FALSE
;

239 
gtkc⁄v
->
show_f‹m©tög_toﬁb¨
 = 
FALSE
;

240 
gtkc⁄v
->
show_time°amps
 = 
FALSE
;

242 
	`g_sig«l_c⁄√˘_sw≠≥d
(
	`G_OBJECT
(
∑√
), "focus",

243 
	`G_CALLBACK
(
gtk_widgë_gøb_focus
),

244 
gtkc⁄v
->
íåy
);

247 
	`gaim_debug_misc
("roombrowse","Setting upÅabs\n");

248 
gtkc⁄v
->
èbby
 =Åabby = 
	`gtk_hbox_√w
(
FALSE
, 6);

249 
gtkc⁄v
->
míu_èbby
 = míu_èbby = 
	`gtk_hbox_√w
(
FALSE
, 6);

250 
gtkc⁄v
->
íåy
 = 
	`gtk_imhtml_√w
(
NULL
, NULL);

251 
gtkc⁄v
->
toﬁb¨
 = 
	`gtk_imhtm…oﬁb¨_√w
();

253 
	`gaim_debug_misc
("roombrowse","Setting up close button\n");

255 
gtkc⁄v
->
˛o£
 = 
	`gtk_buâ⁄_√w
();

256 
	`gtk_widgë_£t_size_ªque°
(
	`GTK_WIDGET
(
gtkc⁄v
->
˛o£
), 16, 16);

257 
	`gtk_buâ⁄_£t_ªlõf
(
	`GTK_BUTTON
(
gtkc⁄v
->
˛o£
), 
GTK_RELIEF_NONE
);

258 
˛o£_image
 = 
	`gtk_image_√w_‰om_°ock
(
GTK_STOCK_CLOSE
, 
GTK_ICON_SIZE_MENU
);

259 
	`gtk_widgë_show
(
˛o£_image
);

260 
	`gtk_c⁄èöî_add
(
	`GTK_CONTAINER
(
gtkc⁄v
->
˛o£
), 
˛o£_image
);

261 
	`gtk_toﬁtùs_£t_tù
(
gtkc⁄v
->
toﬁtùs
, gtkc⁄v->
˛o£
,

262 
	`_
("Clo£ c⁄vîßti⁄"), 
NULL
);

264 
	`g_sig«l_c⁄√˘
(
	`G_OBJECT
(
gtkc⁄v
->
˛o£
), "clicked",

265 
	`G_CALLBACK
(
˛o£_c⁄v_cb
), 
c⁄v
);

271 
	`g_sig«l_c⁄√˘
(
	`G_OBJECT
(
gtkc⁄v
->
˛o£
), "state_changed",

272 
	`G_CALLBACK
(
èb_˛o£_buâ⁄_°©e_ch™ged_cb
), 
NULL
);

275 
gtkc⁄v
->
ic⁄
 = 
	`gtk_image_√w
();

276 
gtkc⁄v
->
míu_ic⁄
 = 
	`gtk_image_√w
();

280 
gtkc⁄v
->
èb_œbñ
 = 
	`gtk_œbñ_√w
(
	`gaim_c⁄vîßti⁄_gë_tôÀ
(
c⁄v
));

281 
gtkc⁄v
->
míu_œbñ
 = 
	`gtk_œbñ_√w
(
	`gaim_c⁄vîßti⁄_gë_tôÀ
(
c⁄v
));

283 
	`gtk_misc_£t_Æignmít
(
	`GTK_MISC
(
gtkc⁄v
->
èb_œbñ
), 0.00, 0.5);

284 
	`gtk_misc_£t_∑ddög
(
	`GTK_MISC
(
gtkc⁄v
->
èb_œbñ
), 4, 0);

287 
	`gaim_debug_misc
("roombrowse","Packing\n");

289 
	`gtk_box_∑ck_°¨t
(
	`GTK_BOX
(
èbby
), 
gtkc⁄v
->
ic⁄
, 
FALSE
, FALSE, 0);

290 
	`gtk_box_∑ck_°¨t
(
	`GTK_BOX
(
míu_èbby
), 
gtkc⁄v
->
míu_ic⁄
,

291 
FALSE
, FALSE, 0);

293 
	`gtk_widgë_show_Æl
(
gtkc⁄v
->
ic⁄
);

294 
	`gtk_widgë_show_Æl
(
gtkc⁄v
->
míu_ic⁄
);

296 
	`gtk_box_∑ck_°¨t
(
	`GTK_BOX
(
èbby
), 
gtkc⁄v
->
èb_œbñ
, 
TRUE
, TRUE, 0);

297 
	`gtk_box_∑ck_°¨t
(
	`GTK_BOX
(
míu_èbby
), 
gtkc⁄v
->
míu_œbñ
, 
TRUE
, TRUE, 0);

298 
	`gtk_widgë_show
(
gtkc⁄v
->
èb_œbñ
);

299 
	`gtk_widgë_show
(
gtkc⁄v
->
míu_œbñ
);

300 
	`gtk_misc_£t_Æignmít
(
	`GTK_MISC
(
gtkc⁄v
->
míu_œbñ
), 0, 0);

302 
	`gtk_box_∑ck_°¨t
(
	`GTK_BOX
(
èbby
), 
gtkc⁄v
->
˛o£
, 
FALSE
, FALSE, 0);

303 i‡(
	`gaim_¥efs_gë_boﬁ
("/gaim/gtk/conversations/close_on_tabs"))

304 
	`gtk_widgë_show
(
gtkc⁄v
->
˛o£
);

306 
	`gtk_widgë_show
(
èbby
);

307 
	`gtk_widgë_show
(
míu_èbby
);

309 i‡(
	`gaim_c⁄vîßti⁄_gë_ty≥
(
c⁄v
Ë=
GAIM_CONV_IM
)

310 
	`gaim_gtkc⁄v_upd©e_buddy_ic⁄
(
c⁄v
);

312 
	`gaim_debug_misc
("roombrowse","AddingÅoÇotebook\n");

313 
	`gaim_debug_misc
("roombrow£","gtkwö->nŸebook=%x\n",
gtkwö
->
nŸebook
);

314 
	`gaim_debug_misc
("roombrow£","gtkwö=%x\n",
gtkwö
);

315 
	`gaim_debug_misc
("roombrow£","èbby=%x\n",
èbby
);

316 
	`gaim_debug_misc
("roombrow£","míu_èbby=%x\n",
míu_èbby
);

317 
	`gaim_debug_misc
("roombrow£","èb_c⁄t=%x\n",
èb_c⁄t
);

320 
n

	`gtk_nŸebook_gë_n_∑ges
(
	`GTK_NOTEBOOK
(
gtkwö
->
nŸebook
));

321 
	`gaim_debug_misc
("roombrow£:","NŸebook ha†%dÖages\n",
n
);

322 
	`gtk_nŸebook_≠≥nd_∑ge_míu
(
	`GTK_NOTEBOOK
(
gtkwö
->
nŸebook
), 
èb_c⁄t
, 
èbby
, 
míu_èbby
);

323 
	`gaim_debug_misc
("roombrowse","GotÅhrougháppend_page_menu\n");

324 
	`gtk_widgë_show
(
èb_c⁄t
);

326 i‡(
	`gaim_c⁄v_wödow_gë_c⁄vîßti⁄_cou¡
(
wö
) == 1) {

328 
	`gtk_nŸebook_£t_cuºít_∑ge
(
	`GTK_NOTEBOOK
(
gtkwö
->
nŸebook
), 0);

330 
	`gtk_nŸebook_£t_show_èbs
(
	`GTK_NOTEBOOK
(
gtkwö
->
nŸebook
),

331 
	`gaim_¥efs_gë_boﬁ
("/gaim/gtk/conversations/tabs"));

334 
	`gtk_nŸebook_£t_show_èbs
(
	`GTK_NOTEBOOK
(
gtkwö
->
nŸebook
), 
TRUE
);

335 
	`gaim_debug_misc
("roombrowse","FOcus stuff\n");

343 
	}
}

346 
	$roombrow£_míu_cb
(
GaimBli°Node
* 
node
, 
gpoöãr
 
d©a
) {

347 
GaimC⁄vWödow
 *
wö
=
	`gaim_gë_fú°_wödow_wôh_ty≥
(
GAIM_CONV_MISC
);

348 
GaimC⁄vîßti⁄
 *
c⁄v
=
	`g_√w0
(GaimConversation, 1);

350 
GaimAccou¡
* 
accou¡
=((
GaimCh©
*)
node
)->account;

351 if(!
wö
)

352 
wö
=
	`gaim_c⁄v_wödow_√w
();

353 
GaimCh©
* 
ch©
 = ((GaimCh©*)
node
);

354 *
room

	`g_°rdup
(
	`g_hash_èbÀ_lookup
(
ch©
->
comp⁄íts
,"name"));

357 
	`gaim_debug_misc
("roombrow£r","I¿cb wôhÇode=%x,áccou¡=%x\n",
node
,
accou¡
);

358 
c⁄v
=
	`gaim_c⁄vîßti⁄_√w
(
GAIM_CONV_MISC
, 
accou¡
, 
room
);

360 
	`gaim_c⁄vîßti⁄_£t_loggög
(
c⁄v
, 
FALSE
);

362 
	`roombrow£_gtk_add_c⁄vîßti⁄
(
c⁄v
->
wödow
, conv);

363 
	`gaim_c⁄v_wödow_show
(
c⁄v
->
wödow
);

365 
	`g_‰ì
(
room
);

367 
	}
}

368 
	$roombrow£_míu_¸óã
(
GaimBli°Node
 *
node
, 
GLi°
 **
míu
)

371 *
œbñ
,*
room
;

373 
gaym_c⁄n
 *
gaym
;

374 
GaimCh©
 *
ch©
=(GaimCh©*)
node
;

376 if(
node
->
ty≥
 !
GAIM_BLIST_CHAT_NODE
)

379 
gaym
=
ch©
->
accou¡
->
gc
->
¥Ÿo_d©a
;

381 
room

	`g_°rdup
(
	`g_hash_èbÀ_lookup
(
ch©
->
comp⁄íts
,"name"));

383 if(!
room
)

387 
œbñ
 = 
	`g_°rdup_¥ötf
("Lurk i¿%s",
room
);

388 
GaimBli°NodeA˘i⁄
* 
a˘
=
	`gaim_bli°_node_a˘i⁄_√w
(
œbñ
,

389 
roombrow£_míu_cb
,

390 
ch©
->
accou¡
);

392 *
míu
=
	`g_li°_≠≥nd
(*míu,
a˘
);

394 
	}
}

395 
gboﬁón
 
	$∂ugö_lﬂd
(
GaimPlugö
 *
∂ugö
)

397 
	`gaim_sig«l_c⁄√˘
(
	`gaim_bli°_gë_h™dÀ
(),

399 
∂ugö
, 
	`GAIM_CALLBACK
(
roombrow£_míu_¸óã
), 
NULL
);

403  
TRUE
;

404 
	}
}

406 
GaimPlugöInfo
 
	göfo
 =

408 
GAIM_PLUGIN_MAGIC
,

409 
GAIM_MAJOR_VERSION
,

410 
GAIM_MINOR_VERSION
,

411 
GAIM_PLUGIN_STANDARD
,

412 
GAIM_GTK_PLUGIN_TYPE
,

414 
NULL
,

415 
GAIM_PRIORITY_DEFAULT
,

416 
CHATSORT_PLUGIN_ID
,

417 
N_
("Gay.Com Room Browser"),

418 
VERSION
,

419 
N_
("BrowseÑooms in gay.com"),

420 
N_
("AddsáÑight-click itemÅo context menu."),

422 
GAIM_WEBSITE
,

423 
∂ugö_lﬂd
,

424 
NULL
,

425 
NULL
,

426 
NULL
,

427 
NULL
,

428 
NULL


432 
	$öô_∂ugö
(
GaimPlugö
 *
∂ugö
)

434 
	}
}

436 
GAIM_INIT_PLUGIN
(
hi°‹y
, 
öô_∂ugö
, 
öfo
)

	@
1
.
1
/usr/include
2
22
config.h
roombrowse.c
